<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<!-- <script src="https://unpkg.com/vue@next"></script> -->
		<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue-router/dist/vue-router.js"></script>
		
		<!-- <script src="https://cdn.bootcss.com/vue/2.5.2/vue.min.js"></script>
		<script src="https://cdn.bootcss.com/vue-router/3.0.1/vue-router.min.js"></script> -->
	</head>
	<body>
		<div id="app">
			<router-link to="/home">home</router-link>
			<router-link to="/news">news</router-link>

			<router-view></router-view>
		</div>
		
		<template id="home">
			
			<div>
				<h2>首页</h2>
				<router-link to="/home/login">登录</router-link>
				<router-link to="/home/reg">注册</router-link>
				
				<router-view></router-view>
			</div>
		</template>
		
		<template id="news">
			<div>
				<div>新闻页</div>
				<ul>
					<li>
						<router-link to="/news/detail/001">新闻1</router-link>
						<router-link to="/news/detail/002">新闻2</router-link>
						
						<router-view></router-view>
					</li>
					
				</ul>
			</div>
		</template>
		
		<template id="login">
			<div>登陆界面</div>
		</template>
		
		<template id="reg">
			<div>注册界面 </div>
		</template>
		
		<template id="newsDetail">
			<div>
				<div>新闻详情页</div>
				<div>{{$route.params.id}}</div>
			</div>
		</template>
		
		<script type="text/javascript">

			//1.定义（路由）组件。
			const Home = { template:'#home' };
			const News = { template:'#news' };
			const Login = { template:'#login' };
			const Reg = { template:'#reg' };
			const NewsDetail = {
				template:'#newsDetail',
				data(){
					return{
						msg:"helloworld"
					}
				},
				created(){
					console.log(this.$route.params.id)
					
				},
				watch:{
					
					$route(newRoute,oldRoute){
						console.log("watch:" + this.$route.params.id)
					}
				}
				
				};
			
			//2.定义路由
			//每个路由应该映射一个组件
			const routes = [
				{
					path:'/',
					redirect:'home'
					
				},
				{
					path:'/home',
					component: Home, 
					children:[
						{
							path:'/home',
							redirect:'/home/login'
							
						},
						{
							path:'/home/login',
							component:Login,
						},
						{
							path:'/home/reg', 
							component:Reg,
						}
					],
				},
				
				{
					path:'/news',
					component: News,
					children:[
						{
							path:'/news/detail/:id',
							component:NewsDetail
						}
					]
				}
			]
			
			//3.创建 router 实例,然后传‘routes’配置
			const router = new VueRouter({
				routes //（缩写）相当于 routes : routes
			})
			
			//4.创建和挂载根实例
			//记得要通过 router 配置参数注入路由，
			//从而让整个应用都有路由功能。
				
			let vm = new Vue({
				el:"#app",
				data:{
					
					
					
				},
				
				router
				
			});
		</script>
	</body>
</html>
