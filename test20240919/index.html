<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>20240919</title>
		<!-- <script src="https://unpkg.com/vue@next"></script> -->
		<script src="js/v2.6.10/vue.js" type="text/javascript" charset="utf-8"></script>
		<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	</head>
	<body>
		<div id="app">
			<form id="myform" method="post" enctype="multipart/form-data">
				<input type="text" name="username" />
				<input type="password" name="password" />
				<input type="date" name="birthday" />
				<img :src="base64img" /><br/>
				<input type="file" name="avatarfile" @change="preview(this)"/>
				<button type="button" @click="adduser">注册</button>
				
				
			</form>
			
			<aa></aa>
			
			<my-aaa> </my-aaa>
			<my-aaa> </my-aaa>
			
			
			
		</div>
		
			<template id="aaa">
				<div>
					<h1>h1</h1>
					<ul>
						<li v-for="val in arr">
							{{val}}
						</li>
					</ul>
				</div>
			</template>
			
		<script>
			
			var Aaa=Vue.extend({
				data(){
					return {
						msg:"Global Component"
					};
				},
				methods:{
					change()
					{
						this.msg = "changed";
					}
				},
				
				template:"<h3 @click='change'>{{msg}}</h3>"
			})
			
			Vue.component('aa',Aaa)
			
		let vm = new Vue({
			el:"#app",
			data:{
				base64img:''
				// user:{
					
				// },
				
			},
			// created(){
			// 	const axios = require('axios');
				
			// 	// 向给定ID的用户发起请求
			// 	axios.get('/user?ID=12345')
			// 	  .then(function (response) {
			// 	    // 处理成功情况
			// 	    console.log(response);
			// 	  })
			// 	  .catch(function (error) {
			// 	    // 处理错误情况
			// 	    console.log(error);
			// 	  });
				
			// },
			components:{
				'my-aaa':{
					data(){
						return{
							msg:"welcome Vue!",
							arr:['apple','banana','orange','watermalon']
						}
					},
					methods:{
						change(){
							this.msg="changed";
						}
					},
					template:"#aaa"
				}
			},
			methods:{
				adduser(){
					var fd = new FormData(document.getElementById("myform"));
					
					axios.post('http://localhost:8080/books',fd)
					.then(response=>{
						console.log(response);
					})
					.catch(err=>{
						console.log(err);
					});
				},
				preview(obj){
					
					
					var file = event.target.files[0];
					
					var fr = new FileReader();
					
					fr.readAsDataURL(file);
					fr.onload = function(e){
						vm.base64img = e.target.result;
					}
				}
				
			}
		});
		</script>
	</body>
</html>
